# ============================================================================
# Project Autonomous Alpha v1.5.0
# Environment Variables Template
# ============================================================================
#
# INSTRUCTIONS:
#   1. Copy this file to .env
#   2. Fill in your actual values
#   3. NEVER commit .env to version control
#
# TARGET: Wolf@NAS:/volume2/docker/Herman/Trade_Bot
# ============================================================================

# ============================================================================
# SOVEREIGN GATEWAY - NAS SSH Configuration (SEC-001)
# ============================================================================

# NAS/Gateway IP address (your Synology NAS)
GATEWAY_IP=192.168.1.xxx

# SSH username for NAS access
GATEWAY_USER=your_nas_username

# SSH password for NAS access (NEVER commit actual password)
SOVEREIGN_GATEWAY_PASSWORD=your_secure_password_here

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL password (used by docker-compose)
POSTGRES_PASSWORD=sovereign_secret_2024

# Aura MCP Bridge read-only user password
# MUST match what was set via ALTER ROLE after migration 012
AURA_DB_PASSWORD=your_aura_readonly_password_here

# Database Configuration (app_trading role - SELECT/INSERT only)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=autonomous_alpha
DB_USER=app_trading
DB_PASSWORD=trading_app_2024

# Debug mode (set to false in production)
DB_ECHO=false

# HMAC Signature Verification (SOVEREIGN TIER SECURITY)
# Minimum 32 characters required
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SOVEREIGN_SECRET=your_secret_key_here_minimum_32_characters
WEBHOOK_SECRET=your_webhook_secret_here

# TradingView IP Whitelist (comma-separated CIDR ranges)
# Official TradingView webhook IPs
TRADINGVIEW_IP_WHITELIST=52.89.214.238,34.212.75.30,54.218.53.128,52.32.178.7

# ============================================================================
# v1.5.0: GUARDIAN SERVICE - Hard Stop Configuration
# ============================================================================

# Starting equity in ZAR (Guardian monitors daily P&L against this)
ZAR_FLOOR=100000.00

# Manual reset code (required to unlock system after hard stop)
# Generate with: python -c "import secrets; print(secrets.token_hex(16))"
GUARDIAN_RESET_CODE=your_reset_code_here

# Kill switch enabled (emergency shutdown capability)
KILL_SWITCH_ENABLED=true

# ============================================================================
# v1.5.0: DATA INGESTION - Multi-Source Pipeline
# ============================================================================

# Binance API (Crypto - WebSocket streaming)
# Get keys at: https://www.binance.com/en/my/settings/api-management
BINANCE_API_KEY=
BINANCE_API_SECRET=

# OANDA API (Forex - REST polling)
# Get keys at: https://www.oanda.com/demo-account/tpa/personal_token
OANDA_API_KEY=
OANDA_ACCOUNT_ID=

# Twelve Data API (Commodities - REST polling)
# Get keys at: https://twelvedata.com/account/api-keys
TWELVE_DATA_API_KEY=

# ============================================================================
# SOVEREIGN BRAIN - Risk Management Configuration
# ============================================================================

# Test equity for development/testing (ZAR)
# In production, this will be fetched from exchange API
TEST_EQUITY=100000

# Maximum risk per trade in ZAR (RISK-002 guardrail)
# Trades exceeding this cap will be rejected
MAX_RISK_ZAR=5000

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000

# ============================================================================
# COLD PATH AI - OpenRouter Configuration
# ============================================================================

# OpenRouter API Key (gateway to DeepSeek, Llama, and other models)
# Sign up at: https://openrouter.ai/
# Generate key at: https://openrouter.ai/keys
OPENROUTER_API_KEY=your_openrouter_api_key_here

# AI Council consensus threshold (0-100)
# Trades below this score will be rejected
AI_CONSENSUS_THRESHOLD=60

# ============================================================================
# DISCORD COMMAND CENTER (Sprint 7)
# ============================================================================

# Discord Webhook URL for notifications
# Create a webhook in your Discord server: Server Settings > Integrations > Webhooks
# Format: https://discord.com/api/webhooks/WEBHOOK_ID/WEBHOOK_TOKEN
DISCORD_WEBHOOK_URL=

# Minimum alert level to send to Discord
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: WARNING (only WARNING and above are sent)
DISCORD_ALERT_LEVEL=WARNING

# Rate limit between Discord messages (seconds)
# Prevents API throttling and notification spam
# Default: 5 seconds
DISCORD_RATE_LIMIT_SECONDS=5

# Enable/disable Discord notifications
# Set to "false" to disable even if webhook URL is configured
# Default: true (if webhook URL is set)
DISCORD_NOTIFICATIONS_ENABLED=true

# ============================================================================
# VALR EXCHANGE INTEGRATION (Sprint 9)
# ============================================================================

# VALR API Credentials
# Get keys at: https://www.valr.com/settings/api-keys
# Required permissions: View, Trade (for LIVE mode)
VALR_API_KEY=your_valr_api_key_here
VALR_API_SECRET=your_valr_api_secret_here

# ============================================================================
# EXECUTION MODE (Phase 2 - Demo Trading)
# ============================================================================

# Execution Mode Options:
#   DEMO    - Paper trading with real market data (DEFAULT - SAFE)
#   DRY_RUN - Simulate orders without execution
#   LIVE    - Real money trading (requires LIVE_TRADING_CONFIRMED=TRUE)
EXECUTION_MODE=DEMO

# Demo Mode Options:
#   PAPER           - Internal simulation with real market data
#   OANDA_PRACTICE  - OANDA demo account (real API, fake money)
#   BINANCE_TESTNET - Binance testnet (real API, fake money)
DEMO_MODE=PAPER

# Demo state persistence file
DEMO_STATE_FILE=data/demo_broker_state.json

# LIVE Trading Safety Gate
# MUST be set to TRUE to enable LIVE trading
# This is a deliberate friction point to prevent accidental live trading
# LIVE_TRADING_CONFIRMED=TRUE

# Maximum Order Value in ZAR
# Orders exceeding this value will be rejected (VALR-ORD-002)
# Default: R5,000 for initial testing
MAX_ORDER_ZAR=5000

# ============================================================================
# PHASE 2: TRADE LIFECYCLE & STRATEGY MODE
# ============================================================================

# Strategy Mode Options:
#   DETERMINISTIC - No random number generation, all inputs/outputs logged
#                   Same inputs ALWAYS produce same outputs (DEFAULT - SAFE)
#   STOCHASTIC    - Allows randomness (for backtesting/simulation only)
#
# **Validates: Requirements 2.1**
STRATEGY_MODE=DETERMINISTIC

# ============================================================================
# VALR RATE LIMITING
# ============================================================================

# Token Bucket Capacity (requests per minute)
# VALR REST API limit: 600/min
# Default: 600
VALR_RATE_LIMIT_CAPACITY=600

# Token Bucket Refill Rate (tokens per second)
# Default: 10
VALR_RATE_LIMIT_REFILL=10

# ============================================================================
# VALR RECONCILIATION
# ============================================================================

# Reconciliation Interval (seconds)
# How often to verify DB balance matches exchange balance
# Default: 60 seconds
RECONCILIATION_INTERVAL_SECONDS=60

# Mismatch Threshold (percentage)
# Discrepancy above this triggers L6 Lockdown
# Default: 1.0%
RECONCILIATION_MISMATCH_THRESHOLD_PCT=1.0

# Consecutive Failures for Neutral State
# After this many reconciliation failures, enter Neutral State
# Default: 3
RECONCILIATION_MAX_FAILURES=3

# ============================================================================
# VALR MARKET DATA
# ============================================================================

# Market Data Poll Interval (seconds)
# How often to fetch ticker data
# Default: 5 seconds
MARKET_DATA_POLL_INTERVAL=5

# Staleness Threshold (seconds)
# Data older than this is marked stale
# Default: 30 seconds
MARKET_DATA_STALENESS_THRESHOLD=30

# Unreachable Threshold (seconds)
# After this long without data, trigger Safe-Idle
# Default: 60 seconds
MARKET_DATA_UNREACHABLE_THRESHOLD=60

# Maximum Spread (percentage)
# Trading rejected if spread exceeds this
# Default: 2.0%
MARKET_DATA_MAX_SPREAD_PCT=2.0
